<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <!-- Binaural Audio Section -->
    <!-- Frequency Offset Slider -->
    <input type="range" id="frequencyOffsetSlider" min="0" max="50" value="10">
    <span id="frequencyOffsetDisplay">10</span> <!-- Display the offset value -->

    <!-- Play Button for Binaural Audio -->
    <button id="playButtonBinaural" class="play">Play Binaural</button>

    <script>
        let audioContextBinaural = null;
        let leftOscillator = null;
        let rightOscillator = null;

        function initAudioContext() {
            audioContextBinaural = new (window.AudioContext || window.webkitAudioContext)();
            leftOscillator = audioContextBinaural.createOscillator();
            rightOscillator = audioContextBinaural.createOscillator();
            leftOscillator.type = 'sine';
            rightOscillator.type = 'sine';
            leftOscillator.connect(audioContextBinaural.destination);
            rightOscillator.connect(audioContextBinaural.destination);
        }

        function startAudio() {
            if (!audioContextBinaural) {
                initAudioContext();
                updateFrequencyOffset();
            }
            leftOscillator.start();
            rightOscillator.start();
            document.getElementById('playButtonBinaural').classList.add('playing');
        }

        function stopAudio() {
            leftOscillator.stop();
            rightOscillator.stop();
            leftOscillator.disconnect();
            rightOscillator.disconnect();
            document.getElementById('playButtonBinaural').classList.remove('playing');
        }

        function updateFrequencyOffset() {
            const offset = parseInt(frequencyOffsetSlider.value);
            frequencyOffsetDisplay.textContent = offset;
            leftOscillator.frequency.setValueAtTime(440, audioContextBinaural.currentTime);
            rightOscillator.frequency.setValueAtTime(440 + offset, audioContextBinaural.currentTime);
        }

        const frequencyOffsetSlider = document.getElementById('frequencyOffsetSlider');
        const frequencyOffsetDisplay = document.getElementById('frequencyOffsetDisplay');
        const playButtonBinaural = document.getElementById('playButtonBinaural');

        playButtonBinaural.addEventListener('click', function() {
            if (!audioContextBinaural) {
                initAudioContext();
            }
            
            if (audioContextBinaural.state === 'running') {
                stopAudio();
            } else {
                startAudio();
            }
        });

        frequencyOffsetSlider.addEventListener('input', updateFrequencyOffset);
    </script>
    <style>
        .play.playing {
            background-color: red;
        }
    </style>
</body>
</html>
