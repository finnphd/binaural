<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <!-- Binaural Audio Section -->
    <!-- Frequency Offset Slider -->
    <input type="range" id="frequencyOffsetSlider" min="0" max="50" value="10">
    <span id="frequencyOffsetDisplay">10</span> <!-- Display the offset value -->

    <!-- Play Button for Binaural Audio -->
    <button id="playButtonBinaural">Play Binaural</button>

    <script>
        // Function to create an AudioContext
        function createAudioContext() {
            if ('AudioContext' in window) {
                return new AudioContext();
            } else if ('webkitAudioContext' in window) {
                return new webkitAudioContext();
            } else {
                console.error('Web Audio API is not supported by your browser.');
                return null;
            }
        }

        let audioContextBinaural = createAudioContext();
        let leftOscillator = null;
        let rightOscillator = null;

        function createOscillators(context) {
            const leftOscillator = context.createOscillator();
            const rightOscillator = context.createOscillator();
            leftOscillator.type = 'sine';
            rightOscillator.type = 'sine';
            return { leftOscillator, rightOscillator };
        }

        function startOscillators() {
            leftOscillator.start();
            rightOscillator.start();
        }

        function stopOscillators() {
            leftOscillator.stop();
            rightOscillator.stop();
        }

        function updateFrequencyOffset() {
            const offset = parseInt(frequencyOffsetSlider.value);
            frequencyOffsetDisplay.textContent = offset;
            if (leftOscillator && rightOscillator) {
                leftOscillator.frequency.setValueAtTime(440, audioContextBinaural.currentTime);
                rightOscillator.frequency.setValueAtTime(440 + offset, audioContextBinaural.currentTime);
            }
        }

        function toggleBinauralAudio() {
            if (leftOscillator && rightOscillator) {
                stopOscillators();
                playButtonBinaural.textContent = 'Play Binaural';
                leftOscillator = null;
                rightOscillator = null;
            } else {
                ({ leftOscillator, rightOscillator } = createOscillators(audioContextBinaural));
                startOscillators();
                playButtonBinaural.textContent = 'Stop Binaural';
                updateFrequencyOffset();
            }
        }

        const frequencyOffsetSlider = document.getElementById('frequencyOffsetSlider');
        const frequencyOffsetDisplay = document.getElementById('frequencyOffsetDisplay');
        const playButtonBinaural = document.getElementById('playButtonBinaural');

        playButtonBinaural.addEventListener('click', toggleBinauralAudio);
        frequencyOffsetSlider.addEventListener('input', updateFrequencyOffset);
    </script>
</body>
</html>
